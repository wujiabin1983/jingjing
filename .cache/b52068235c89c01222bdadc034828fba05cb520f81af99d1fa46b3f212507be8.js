{"source":"webpackJsonp([215],{\"2HVx\":function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=a(\"OezN\"),o=a(\"8Bwj\");var n=function(e){a(\"gjTO\")},i=a(\"J0+h\")(s.a,o.a,n,\"data-v-53da83a4\",null);t.default=i.exports},\"8Bwj\":function(e,t,a){\"use strict\";var s={render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s(\"el-container\",{staticClass:\"app-container\"},[s(\"el-header\",[s(\"el-card\",[s(\"el-form\",{staticClass:\"demo-form-inline\",attrs:{inline:!0,model:a.form}},[s(\"el-form-item\",{staticClass:\"floatLeft\"},[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:a.shoppingGuide}},[a._v(\"新建活动\")])],1),a._v(\" \"),s(\"div\",{staticClass:\"floatRight\"},[s(\"el-form-item\",[s(\"el-input\",{attrs:{placeholder:\"请输入活动标题\"},model:{value:a.form.activityTitle,callback:function(e){a.$set(a.form,\"activityTitle\",e)},expression:\"form.activityTitle\"}})],1),a._v(\" \"),s(\"el-form-item\",[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:a.onSubmit}},[a._v(\"查询\")])],1)],1)],1)],1)],1),a._v(\" \"),s(\"el-main\",[s(\"el-card\",[s(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:this.tableLoading,expression:\"this.tableLoading\"}],ref:\"tableData\",attrs:{data:a.tableData},on:{\"selection-change\":a.handleSelectionChange}},[s(\"el-table-column\",{attrs:{type:\"index\",width:\"50\",label:\"序号\"}}),a._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"activityTitle\",label:\"活动标题\"}}),a._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"browseCount\",label:\"浏览次数\"}}),a._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"shareNum\",label:\"分享次数\"}}),a._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"createBy\",label:\"创建人\"}}),a._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"createDate\",label:\"创建时间\"}}),a._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"action\",label:\"操作\"},scopedSlots:a._u([{key:\"default\",fn:function(t){return[t.row.isEdit?a._e():s(\"el-tooltip\",{staticClass:\"item\",attrs:{content:\"修改\",placement:\"top\"}},[s(\"i\",{staticClass:\"iconfont icon-edit\",on:{click:function(e){e.preventDefault(),a.iconXiugai(t.$index,t.row)}}})]),a._v(\" \"),s(\"el-tooltip\",{staticClass:\"item\",attrs:{content:\"删除\",placement:\"top\"}},[s(\"i\",{staticClass:\"iconfont icon-delete\",on:{click:function(e){e.preventDefault(),a.iconShanchu(t.$index,t.row)}}})]),a._v(\" \"),s(\"el-tooltip\",{staticClass:\"item\",attrs:{content:\"发送\",placement:\"top\"}},[s(\"i\",{staticClass:\"iconfont icon-duanxin\",on:{click:function(e){e.preventDefault(),a.iconEmail(t.$index,t.row)}}})])]}}])})],1),a._v(\" \"),0!=a.count?s(\"el-footer\",[s(\"el-pagination\",{staticClass:\"pagination\",attrs:{background:\"\",layout:\"total, sizes, prev, pager, next, jumper\",\"page-size\":a.limit,total:a.count},on:{\"size-change\":a.handleSizeChange,\"current-change\":a.handleCurrentChange}})],1):a._e(),a._v(\" \"),s(\"el-dialog\",{attrs:{title:\"提示\",visible:a.dialogVisible,width:\"60%\"},on:{\"update:visible\":function(e){a.dialogVisible=e}}},[s(\"div\",[s(\"el-form\",{ref:\"pushForm\",staticClass:\"demo-ruleForm\",attrs:{model:a.pushForm,rules:a.pushRules,\"label-width\":\"100px\"}},[s(\"el-form-item\",{attrs:{label:\"短信内容\",prop:\"msgDesc\"}},[s(\"el-input\",{attrs:{type:\"textarea\",resize:\"none\",placeholder:\"请输入短信内容\"},model:{value:a.pushForm.msgDesc,callback:function(e){a.$set(a.pushForm,\"msgDesc\",e)},expression:\"pushForm.msgDesc\"}})],1),a._v(\" \"),s(\"el-form-item\",{attrs:{label:\"发送对象\"}},[s(\"div\",[a._v(\"(活动创建时适用门店的会员)\")]),a._v(\" \"),s(\"el-radio-group\",{on:{change:a.handleSendObjType},model:{value:a.type,callback:function(e){a.type=e},expression:\"type\"}},[s(\"el-radio\",{attrs:{label:\"全部\"}},[a._v(\"全部\")]),a._v(\" \"),s(\"el-radio\",{attrs:{label:\"按条件筛选\"}},[a._v(\"按条件筛选\")])],1),a._v(\" \"),\"按条件筛选\"==a.type?s(\"el-card\",[s(\"el-form-item\",{attrs:{label:\"性别\"}},[s(\"el-radio-group\",{model:{value:a.pushForm.sendObj.gender,callback:function(e){a.$set(a.pushForm.sendObj,\"gender\",e)},expression:\"pushForm.sendObj.gender\"}},[s(\"el-radio\",{attrs:{label:\"不限\"}},[a._v(\"不限\")]),a._v(\" \"),s(\"el-radio\",{attrs:{label:\"女\"}},[a._v(\"女\")]),a._v(\" \"),s(\"el-radio\",{attrs:{label:\"男\"}},[a._v(\"男\")]),a._v(\" \"),s(\"el-radio\",{attrs:{label:\"未知\"}},[a._v(\"未知\")])],1)],1),a._v(\" \"),s(\"el-form-item\",{attrs:{label:\"会员等级\"}},[s(\"el-select\",{staticClass:\"inline-width\",attrs:{placeholder:\"请选择\"},on:{change:a.levalSelect},model:{value:a.pushForm.sendObj.memberLevel,callback:function(e){a.$set(a.pushForm.sendObj,\"memberLevel\",e)},expression:\"pushForm.sendObj.memberLevel\"}},a._l(a.levalInfo,function(e){return s(\"el-option\",{key:e.key,attrs:{label:e.key,value:e.index}})}),1)],1),a._v(\" \"),s(\"el-form-item\",{attrs:{label:\"会员消费\"}},[s(\"el-radio-group\",{staticClass:\"radioGroupBlock\",on:{change:a.consumptionHandle},model:{value:a.pushForm.sendObj.memberConsume.type,callback:function(e){a.$set(a.pushForm.sendObj.memberConsume,\"type\",e)},expression:\"pushForm.sendObj.memberConsume.type\"}},[s(\"el-radio\",{attrs:{label:\"单笔消费\"}},[a._v(\"\\n                                                单笔消费\\n                                                \"),\"单笔消费\"==a.pushForm.sendObj.memberConsume.type?s(\"span\",[s(\"el-select\",{staticClass:\"inline-width\",attrs:{placeholder:\"请选择\",disabled:\"单笔消费\"!=a.pushForm.sendObj.memberConsume.type},model:{value:a.pushForm.sendObj.memberConsume.operator,callback:function(e){a.$set(a.pushForm.sendObj.memberConsume,\"operator\",e)},expression:\"pushForm.sendObj.memberConsume.operator\"}},[s(\"el-option\",{attrs:{label:\"大于\",value:\"大于\"}}),a._v(\" \"),s(\"el-option\",{attrs:{label:\"等于\",value:\"等于\"}}),a._v(\" \"),s(\"el-option\",{attrs:{label:\"小于\",value:\"小于\"}})],1),a._v(\" \"),s(\"el-input\",{staticClass:\"inline-width\",attrs:{placeholder:\"请输入金额\",disabled:\"单笔消费\"!=a.pushForm.sendObj.memberConsume.type},model:{value:a.pushForm.sendObj.memberConsume.money,callback:function(e){a.$set(a.pushForm.sendObj.memberConsume,\"money\",e)},expression:\"pushForm.sendObj.memberConsume.money\"}}),a._v(\" \"),s(\"span\",[a._v(\"元\")])],1):a._e()]),a._v(\" \"),s(\"el-radio\",{attrs:{label:\"累计消费\"}},[a._v(\"\\n                                                累计消费\\n                                                \"),\"累计消费\"==a.pushForm.sendObj.memberConsume.type?s(\"span\",[s(\"el-select\",{staticClass:\"inline-width\",attrs:{placeholder:\"请选择\",disabled:\"累计消费\"!=a.pushForm.sendObj.memberConsume.type},model:{value:a.pushForm.sendObj.memberConsume.operator,callback:function(e){a.$set(a.pushForm.sendObj.memberConsume,\"operator\",e)},expression:\"pushForm.sendObj.memberConsume.operator\"}},[s(\"el-option\",{attrs:{label:\"大于\",value:\"大于\"}}),a._v(\" \"),s(\"el-option\",{attrs:{label:\"等于\",value:\"等于\"}}),a._v(\" \"),s(\"el-option\",{attrs:{label:\"小于\",value:\"小于\"}})],1),a._v(\" \"),s(\"el-input\",{staticClass:\"inline-width\",attrs:{placeholder:\"请输入金额\",disabled:\"累计消费\"!=a.pushForm.sendObj.memberConsume.type},model:{value:a.pushForm.sendObj.memberConsume.money,callback:function(e){a.$set(a.pushForm.sendObj.memberConsume,\"money\",e)},expression:\"pushForm.sendObj.memberConsume.money\"}}),a._v(\" \"),s(\"span\",[a._v(\"元\")])],1):a._e()])],1)],1),a._v(\" \"),s(\"el-form-item\",{attrs:{label:\"入会时长\"}},[s(\"span\",[a._v(\"入会\")]),a._v(\" \"),s(\"el-input\",{staticClass:\"inline-width\",attrs:{placeholder:\"请输入入会时长\"},model:{value:a.pushForm.sendObj.years,callback:function(e){a.$set(a.pushForm.sendObj,\"years\",e)},expression:\"pushForm.sendObj.years\"}})],1),a._v(\" \"),s(\"el-form-item\",{attrs:{label:\"生日当天会员\"}},[s(\"el-radio-group\",{model:{value:a.pushForm.sendObj.dBirthday,callback:function(e){a.$set(a.pushForm.sendObj,\"dBirthday\",e)},expression:\"pushForm.sendObj.dBirthday\"}},[s(\"el-radio\",{attrs:{label:\"是\"}},[a._v(\"是\")]),a._v(\" \"),s(\"el-radio\",{attrs:{label:\"否\"}},[a._v(\"否\")])],1)],1),a._v(\" \"),s(\"el-form-item\",{attrs:{label:\"生日当月会员\"}},[s(\"el-radio-group\",{model:{value:a.pushForm.sendObj.mBirthday,callback:function(e){a.$set(a.pushForm.sendObj,\"mBirthday\",e)},expression:\"pushForm.sendObj.mBirthday\"}},[s(\"el-radio\",{attrs:{label:\"是\"}},[a._v(\"是\")]),a._v(\" \"),s(\"el-radio\",{attrs:{label:\"否\"}},[a._v(\"否\")])],1)],1)],1):a._e()],1),a._v(\" \"),s(\"el-form-item\",{staticClass:\"height80\",attrs:{label:\"发送时间\"}},[s(\"el-radio-group\",{on:{change:a.handleSelectExecuteType},model:{value:a.pushForm.executeType,callback:function(e){a.$set(a.pushForm,\"executeType\",e)},expression:\"pushForm.executeType\"}},[s(\"el-radio\",{attrs:{label:\"立即发送\"}},[a._v(\"立即发送\")]),a._v(\" \"),s(\"el-radio\",{attrs:{label:\"定时发送\"}},[a._v(\"定时发送\")])],1),a._v(\" \"),\"定时发送\"==a.pushForm.executeType?s(\"el-form-item\",[s(\"el-date-picker\",{attrs:{type:\"datetime\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",placeholder:\"选择日期时间\"},model:{value:a.pushForm.sendDate,callback:function(e){a.$set(a.pushForm,\"sendDate\",e)},expression:\"pushForm.sendDate\"}})],1):a._e()],1)],1)],1),a._v(\" \"),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{on:{click:a.closeDialogVisible}},[a._v(\"取 消\")]),a._v(\" \"),s(\"el-button\",{attrs:{type:\"primary\"},on:{click:a.handleSure}},[a._v(\"确 定\")])],1)])],1)],1)],1)},staticRenderFns:[]};t.a=s},OezN:function(e,t,n){\"use strict\";var a=n(\"4YfN\"),i=n.n(a),s=n(\"3cXf\"),l=n.n(s),r=n(\"fsoH\"),o=n(\"0w2Z\"),m=n(\"lQSI\");t.a={data:function(){return{form:{activityTitle:\"\"},pushForm:{storeActivityId:\"\",msgDesc:\"\",sendObj:{gender:\"不限\",memberLevel:\"\",memberConsume:{type:\"\",operator:\"\",money:\"\"},years:\"\",dBirthday:\"否\",mBirthday:\"否\"},executeType:\"立即发送\",sendDate:\"\"},type:\"全部\",pushRules:{msgDesc:[{required:!0,message:\"请输入短信内容\",trigger:\"change\"}]},levalInfo:[],tableData:[],multipleSelection:[],tableLoading:!1,page:0,count:0,limit:this.GLOBAL.limit,dialogVisible:!1}},methods:{closeDialogVisible:function(){this.dialogVisible=!1,this.pushForm={storeActivityId:\"\",msgDesc:\"\",sendObj:{gender:\"不限\",memberLevel:\"\",memberConsume:{type:\"\",operator:\"\",money:\"\"},years:\"\",dBirthday:\"否\",mBirthday:\"否\"},executeType:\"立即发送\",sendDate:\"\"}},handleSure:function(){var o=this,a=this.type;this.$refs.pushForm.validate(function(e){if(e){JSON.parse(l()(o.pushForm));\"全部\"==a?o.pushForm.sendObj=\"全部\":o.pushForm.sendObj.memberLevel=o.pushForm.sendObj.levalName;var t=i()({userId:o.userInfo.userCode},o.pushForm);if(t.sendObj.memberConsume&&\"\"!=t.sendObj.memberConsume.type&&(\"单笔消费\"==t.sendObj.memberConsume.type?t.sendObj.memberConsume.type=\"单笔\":t.sendObj.memberConsume.type=\"累计\"),\"立即发送\"==t.executeType)o.$confirm(\"即将发送短信,请确认?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){n.i(r.a)(t).then(function(e){var t=JSON.parse(Base64.decode(e.data)),a=t.messageType,s=t.messageContent;t.valueObj;\"SUCCESS\"==a?(o.$message.success(s),o.pushForm={storeActivityId:\"\",msgDesc:\"\",sendObj:{gender:\"不限\",memberLevel:\"\",memberConsume:{type:\"单笔消费\",operator:\"\",money:\"\"},years:\"\",dBirthday:\"是\",mBirthday:\"是\"},executeType:\"立即发送\",sendDate:\"\"},o.type=\"全部\",o.tableLoading=!1,o.dialogVisible=!1):(o.$message.warning(s),o.tableLoading=!1)})});else{if(\"\"==t.sendDate)return o.$message.warning(\"请选择定时发送时间！\"),!1;o.$confirm(\"短信将于\"+t.sendDate+\"发送,请确认?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){n.i(r.a)(t).then(function(e){var t=JSON.parse(Base64.decode(e.data)),a=t.messageType,s=t.messageContent;t.valueObj;\"SUCCESS\"==a?(o.$message.success(s),o.pushForm={storeActivityId:\"\",msgDesc:\"\",sendObj:{gender:\"不限\",memberLevel:\"\",memberConsume:{type:\"\",operator:\"\",money:\"\"},years:\"\",dBirthday:\"否\",mBirthday:\"否\"},executeType:\"立即发送\",sendDate:\"\"},o.type=\"全部\",o.tableLoading=!1,o.dialogVisible=!1):(o.$message.warning(s),o.tableLoading=!1)})})}}})},handleSelectExecuteType:function(e){\"立即发送\"==e&&(this.pushForm.sendDate=\"\")},handleSendObjType:function(e){},levalSelect:function(e){this.pushForm.sendObj.levalId=this.levalInfo[e].value,this.pushForm.sendObj.levalName=this.levalInfo[e].key},consumptionHandle:function(e){this.pushForm.sendObj.memberConsume.operator=\"\",this.pushForm.sendObj.memberConsume.money=\"\"},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.page=e,this.showTable(e,this.limit)},handleSizeChange:function(e){this.limit=e,this.showTable(this.page,this.limit)},onSubmit:function(){this.showTable(\"\",this.limit)},shoppingGuide:function(){this.$router.push({name:\"门店活动门店活动新增\",params:{pageType:\"添加\"}})},iconEmail:function(e,t){var a=this;this.pushForm.storeActivityId=t.activityId,this.dialogVisible=!0;var s={userId:this.userInfo.userCode};n.i(o.d)(s).then(function(e){var t=JSON.parse(Base64.decode(e.data));a.levalInfo=t.data}).catch(function(e){})},iconShanchu:function(e,t){var o=this;this.tableLoading=!0,this.$confirm(\"您确定要删除吗, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){var e={userId:o.userInfo.userCode,id:t.id,activityId:t.activityId,activityTitle:t.activityTitle};n.i(r.b)(e).then(function(e){var t=JSON.parse(Base64.decode(e.data)),a=t.messageType,s=t.messageContent;t.valueObj;o.tableLoading=(\"SUCCESS\"==a?(o.$message.success(s),o.showTable(o.page,o.limit)):o.$message.error(s),!1)}).catch(function(e){o.tableLoading=!1})}).catch(function(){o.tableLoading=!1})},iconXiugai:function(e,t){var a=l()(t);this.$router.push({name:\"门店活动门店活动修改\",params:{pageType:\"修改\",formData:a}})},showTable:function(e,t){var s=this,a=(this.form.roleInfo,{userId:this.userInfo.userCode,page:e,limit:t,activityTitle:this.form.activityTitle});this.tableLoading=!0,n.i(r.c)(a).then(function(e){var t=JSON.parse(Base64.decode(e.data)),a=[];t.data.forEach(function(e,t){a.push(i()({isEdit:!1},e))}),s.count=t.count,s.tableData=a,s.tableLoading=!1}).catch(function(e){s.tableLoading=!1})}},created:function(){this.showTable(this.page,this.limit)},computed:i()({},n.i(m.a)([\"userInfo\"]))}},fsoH:function(e,t,a){\"use strict\";t.c=function(e){var t=Base64.encode(o()(e));return a.i(n.a)({url:\"/I_SCRM_INTERFACE_834.action\",method:\"post\",data:t})},t.d=function(e){var t=Base64.encode(o()(e));return a.i(n.a)({url:\"/I_SCRM_INTERFACE_835.action\",method:\"post\",data:t})},t.e=function(e){var t=Base64.encode(o()(e));return a.i(n.a)({url:\"/I_SCRM_INTERFACE_836.action\",method:\"post\",data:t})},t.b=function(e){var t=Base64.encode(o()(e));return a.i(n.a)({url:\"/I_SCRM_INTERFACE_837.action\",method:\"post\",data:t})},t.a=function(e){var t=Base64.encode(o()(e));return a.i(n.a)({url:\"/I_SCRM_INTERFACE_839.action\",method:\"post\",data:t})};var s=a(\"3cXf\"),o=a.n(s),n=a(\"Vo7i\")},gjTO:function(e,t,a){var s=a(\"wBIE\");\"string\"==typeof s&&(s=[[e.i,s,\"\"]]),s.locals&&(e.exports=s.locals);a(\"XkoO\")(\"ebe56f5e\",s,!0)},wBIE:function(e,t,a){(e.exports=a(\"acE3\")(!1)).push([e.i,\".el-card[data-v-53da83a4]{width:100%}.el-form[data-v-53da83a4]{display:unset}.el-form .el-form-item[data-v-53da83a4]{margin-bottom:10px}.radioGroupBlock .el-radio[data-v-53da83a4]{height:35px;line-height:35px;display:block;margin-left:0}.inline-width[data-v-53da83a4]{width:160px}.height80[data-v-53da83a4]{height:80px}\",\"\"])}});"}