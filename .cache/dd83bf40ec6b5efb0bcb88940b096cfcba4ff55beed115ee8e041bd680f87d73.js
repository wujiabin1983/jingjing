{"source":"webpackJsonp([211],{Bc2v:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(\"ORhB\"),s=a(\"KhOI\");var i=function(e){a(\"lcqe\")},n=a(\"J0+h\")(r.a,s.a,i,null,null);t.default=n.exports},FjJs:function(e,t,a){(e.exports=a(\"acE3\")(!1)).push([e.i,\".right{float:right}.del-btn{margin-top:-10px}.add-btn-box,.line{text-align:center}.page-title{padding:20px;margin-bottom:20px;border-bottom:1px solid #e5e5e5}.add-member-return-task-wrap .from-wrap{width:50%;margin:0 auto}.add-member-return-task-wrap .item-inline .el-form-item{display:inline-block}.add-member-return-task-wrap .item-inline .middle-text{margin-left:20px!important}.return-item-wrap .item+.item{margin-top:10px}.return-item-wrap .item .item-header{padding:10px;border-bottom:1px solid #e5e5e5;margin-bottom:10px}.btn-box{text-align:center;margin-top:40px}\",\"\"])},KhOI:function(e,t,a){\"use strict\";var r={render:function(){var r=this,e=r.$createElement,s=r._self._c||e;return s(\"el-card\",{staticClass:\"centerInfo add-member-return-task-wrap\"},[s(\"h4\",{staticClass:\"page-title\"},[r._v(\"\\n    \"+r._s(r.currentId?\"编辑\":\"新增\")+\"问卷模版\\n  \")]),r._v(\" \"),s(\"el-form\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:r.loading,expression:\"loading\"}],ref:\"form\",staticClass:\"from-wrap\",attrs:{model:r.form,rules:r.rules,\"label-width\":\"120px\"}},[s(\"el-form-item\",{attrs:{label:\"问卷名称\",prop:\"templateName\"}},[s(\"el-input\",{attrs:{placeholder:\"请输入问卷名称\"},model:{value:r.form.templateName,callback:function(e){r.$set(r.form,\"templateName\",e)},expression:\"form.templateName\"}})],1),r._v(\" \"),s(\"el-form-item\",{attrs:{label:\"问卷说明\",prop:\"templateDesc\"}},[s(\"el-input\",{attrs:{type:\"textarea\",rows:2,placeholder:\"请输入内容\"},model:{value:r.form.templateDesc,callback:function(e){r.$set(r.form,\"templateDesc\",e)},expression:\"form.templateDesc\"}})],1),r._v(\" \"),s(\"el-form-item\",{attrs:{label:\"是否需要打分\",prop:\"isEval\"}},[s(\"el-radio-group\",{on:{change:r.handleChangeIsEval},model:{value:r.form.isEval,callback:function(e){r.$set(r.form,\"isEval\",e)},expression:\"form.isEval\"}},[s(\"el-radio\",{attrs:{label:\"是\"}},[r._v(\"是\")]),r._v(\" \"),s(\"el-radio\",{attrs:{label:\"否\"}},[r._v(\"否\")])],1)],1),r._v(\" \"),\"是\"==r.form.isEval?[s(\"el-form-item\",{attrs:{label:\"分值\"}},[s(\"el-col\",{attrs:{span:8}},[s(\"el-input-number\",{attrs:{size:\"small\"},model:{value:r.form.evalVal.lowVal,callback:function(e){r.$set(r.form.evalVal,\"lowVal\",e)},expression:\"form.evalVal.lowVal\"}})],1),r._v(\" \"),s(\"el-col\",{staticClass:\"line\",attrs:{span:2}},[r._v(\"至\")]),r._v(\" \"),s(\"el-col\",{attrs:{span:8}},[s(\"el-input-number\",{attrs:{size:\"small\"},model:{value:r.form.evalVal.highVal,callback:function(e){r.$set(r.form.evalVal,\"highVal\",e)},expression:\"form.evalVal.highVal\"}})],1)],1),r._v(\" \"),s(\"el-form-item\",{attrs:{label:\"评分标准\",prop:\"evalDesc\"}},[s(\"el-input\",{attrs:{type:\"textarea\",rows:2,placeholder:\"请输入内容\"},model:{value:r.form.evalDesc,callback:function(e){r.$set(r.form,\"evalDesc\",e)},expression:\"form.evalDesc\"}})],1)]:r._e(),r._v(\" \"),s(\"div\",{staticClass:\"return-item-wrap\"},[r._l(r.form.revisitTaskTempDtl,function(t,a){return s(\"div\",{key:a,staticClass:\"item\"},[s(\"div\",{staticClass:\"item-header\"},[r._v(\"\\n          回访项\"+r._s(a+1)+\"\\n          \"),0!=a?s(\"el-button\",{staticClass:\"right del-btn\",attrs:{type:\"primary\"},on:{click:function(e){r.deleteItem(t,a)}}},[r._v(\"删除\")]):r._e()],1),r._v(\" \"),s(\"el-form-item\",{attrs:{label:\"回访项\",prop:\"taskName\"}},[s(\"el-input\",{attrs:{placeholder:\"请输入回访项\"},model:{value:t.returnVisitItem,callback:function(e){r.$set(t,\"returnVisitItem\",e)},expression:\"item.returnVisitItem\"}})],1),r._v(\" \"),s(\"el-form-item\",{attrs:{label:\"回访话术\",prop:\"taskName\"}},[s(\"el-input\",{attrs:{type:\"textarea\",rows:2,placeholder:\"请输入回访话术\"},model:{value:t.returnVisitItemDesc,callback:function(e){r.$set(t,\"returnVisitItemDesc\",e)},expression:\"item.returnVisitItemDesc\"}})],1)],1)}),r._v(\" \"),s(\"div\",{staticClass:\"add-btn-box\"},[s(\"el-button\",{attrs:{type:\"primary\"},on:{click:r.addItem}},[r._v(\"新增回访项\")])],1)],2),r._v(\" \"),s(\"div\",{staticClass:\"btn-box\"},[s(\"el-button\",{on:{click:r.handleBack}},[r._v(\"返回\")]),r._v(\" \"),s(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){r.submit(\"form\")}}},[r._v(\"确定\")])],1)],2)],1)},staticRenderFns:[]};t.a=r},ORhB:function(e,t,r){\"use strict\";var a=r(\"aA9S\"),s=r.n(a),i=r(\"4YfN\"),n=r.n(i),o=r(\"SFQf\"),l=r(\"lQSI\");t.a={components:{},computed:n()({},r.i(l.a)([\"userInfo\"])),data:function(){return{loading:!1,currentId:null,originalData:null,form:{userId:null,templateName:\"\",templateDesc:\"\",isEval:\"是\",evalVal:{lowVal:\"\",highVal:\"\"},evalDesc:\"\",revisitTaskTempDtl:[{returnVisitItem:\"\",returnVisitItemDesc:\"\"}]},rules:{templateName:[{required:!0,message:\"必填\",trigger:\"blur\"}],templateDesc:[{required:!0,max:140,message:\"必填，字数小于140\",trigger:\"blur\"}],isEval:[{required:!0,message:\"必填\",trigger:\"blur\"}]}}},mounted:function(){this.currentId=this.$route.params.id,this.currentId?this.getDetails():this.reset()},methods:{initForm:function(){this.$refs.form.resetFields(),this.form={userId:null,templateName:\"\",templateDesc:\"\",isEval:\"是\",evalVal:{lowVal:\"\",highVal:\"\"},evalDesc:\"\",revisitTaskTempDtl:[{returnVisitItem:\"\",returnVisitItemDesc:\"\"}]}},getDetails:function(){var c=this;r.i(o.e)({userId:this.userInfo.userCode,id:this.currentId}).then(function(e){var t=JSON.parse(Base64.decode(e.data)),a=t.messageType,r=t.messageContent;if(\"SUCCESS\"==a){c.originalData=r;var s=c.originalData.revisiTaskTemp,i=s.templateName,n=s.templateDesc,o=s.isEval,l=s.evalVal,m=s.evalDesc;c.form={userId:c.userInfo.userCode,templateName:i,templateDesc:n,isEval:o,evalVal:l,evalDesc:m,revisitTaskTempDtl:r.revisitTaskTempDtl}}else c.$message({message:\"系统错误\",type:\"warning\"});c.loading=!1}).catch(function(e){c.loading=!1})},handleChangeIsEval:function(e){\"否\"==e&&(this.form.evalVal={lowVal:\"\",highVal:\"\"},this.form.evalDesc=\"\")},addItem:function(){this.form.revisitTaskTempDtl.push({returnVisitItem:\"\",returnVisitItemDesc:\"\"})},deleteItem:function(e,t){this.form.revisitTaskTempDtl.splice(t,1)},handleBack:function(){},reset:function(){this.initForm()},submit:function(){var t=this;this.form.userId=this.userInfo.userCode,this.$refs.form.validate(function(e){if(e){if(t.loading=!0,t.currentId)return t.update();t.add()}})},add:function(){var a=this;r.i(o.a)(this.form).then(function(e){a.loading=!1;var t=JSON.parse(Base64.decode(e.data));\"SUCCESS\"==t.messageType?(a.$message.success(\"新增成功\"),a.$router.push(\"/work/work-3-2\")):a.$message({message:t.messageContent,type:\"warning\"}),a.loading=!1}).catch(function(e){a.loading=!1,a.$message({message:e,type:\"warning\"})})},update:function(){var a=this,e={revisiTaskTemp:s()({},this.originalData.revisiTaskTemp,this.form),revisitTaskTempDtl:this.form.revisitTaskTempDtl},t=n()({},e,{userId:this.userInfo.userCode,status:this.originalData.revisiTaskTemp.status});r.i(o.f)(t).then(function(e){a.loading=!1;var t=JSON.parse(Base64.decode(e.data));\"SUCCESS\"==t.messageType?(a.$message.success(\"编辑成功\"),a.$router.push(\"/work/work-3-2\")):a.$message({message:t.messageContent,type:\"warning\"}),a.loading=!1}).catch(function(e){a.loading=!1,a.$message({message:e,type:\"warning\"})})}}}},SFQf:function(e,t,a){\"use strict\";t.h=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1001.action\",method:\"post\",data:t})},t.o=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1003.action\",method:\"post\",data:t})},t.p=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1004.action\",method:\"post\",data:t})},t.l=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1031.action\",method:\"post\",data:t})},t.n=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1002.action\",method:\"post\",data:t})},t.k=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1005.action\",method:\"post\",data:t})},t.i=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1006.action\",method:\"post\",data:t})},t.j=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1007.action\",method:\"post\",data:t})},t.m=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1015.action\",method:\"post\",data:t})},t.g=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1008.action\",method:\"post\",data:t})},t.a=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1010.action\",method:\"post\",data:t})},t.f=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1011.action\",method:\"post\",data:t})},t.e=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1009.action\",method:\"post\",data:t})},t.d=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1012.action\",method:\"post\",data:t})},t.b=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1013.action\",method:\"post\",data:t})},t.c=function(e){var t=Base64.encode(s()(e));return a.i(i.a)({url:\"/I_SCRM_INTERFACE_1014.action\",method:\"post\",data:t})};var r=a(\"3cXf\"),s=a.n(r),i=a(\"Vo7i\")},lcqe:function(e,t,a){var r=a(\"FjJs\");\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);a(\"XkoO\")(\"8215c840\",r,!0)}});"}