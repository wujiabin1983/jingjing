{"source":"webpackJsonp([207],{HxMY:function(e,t,r){\"use strict\";var a=r(\"4YfN\"),n=r.n(a),s=r(\"SFQf\"),i=r(\"lQSI\");t.a={components:{},computed:n()({},r.i(i.a)([\"userInfo\"])),data:function(){return{loading:!1,currentId:null,form:{userId:null,templateName:\"\",templateDesc:\"\",isEval:\"\",evalVal:{lowVal:\"\",highVal:\"\"},evalDesc:\"\",patrolShopTaskTempDtl:[{returnVisitItem:\"\",returnVisitItemDesc:\"\"}]},rules:{templateName:[{required:!0,trigger:\"blur\"}],templateDesc:[{required:!0,max:140,message:\"Length should be less 140\",trigger:\"blur\"}]}}},mounted:function(){this.currentId=this.$route.params.id,this.currentId?this.getDetails():this.reset()},methods:{initForm:function(){this.$refs.form.resetFields(),this.form={userId:null,templateName:\"\",templateDesc:\"\",isEval:\"\",evalVal:{lowVal:\"\",highVal:\"\"},evalDesc:\"\",patrolShopTaskTempDtl:[{returnVisitItem:\"\",returnVisitItemDesc:\"\"}]}},getDetails:function(){var n=this;r.i(s.e)({userId:this.userInfo.userCode,id:this.currentId}).then(function(e){var t=JSON.parse(Base64.decode(e.data)),a=t.messageType,r=t.messageContent;\"SUCCESS\"==a?n.form=r:n.$message({message:\"系统错误\",type:\"warning\"}),n.loading=!1}).catch(function(e){n.loading=!1})},addItem:function(){this.form.patrolShopTaskTempDtl.push({returnVisitItem:\"\",returnVisitItemDesc:\"\"})},deleteItem:function(e,t){this.form.patrolShopTaskTempDtl.splice(t,1)},handleBack:function(){},reset:function(){this.initForm()},submit:function(){var t=this;this.form.userId=this.userInfo.userCode,this.$refs.form.validate(function(e){e&&(t.loading=!0,t.currentId&&t.update(),t.add())})},add:function(){var a=this;r.i(s.a)(this.form).then(function(e){a.loading=!1;var t=JSON.parse(Base64.decode(e.data));\"SUCCESS\"==t.messageType?(a.$message.success(\"新增成功\"),a.$router.push(\"work-memberReturnVisit/questionnaireTemplate\")):a.$message({message:t.messageContent,type:\"warning\"}),a.loading=!1}).catch(function(e){a.loading=!1,a.$message({message:e,type:\"warning\"})})},update:function(){var a=this;r.i(s.f)(this.form).then(function(e){a.loading=!1;var t=JSON.parse(Base64.decode(e.data));\"SUCCESS\"==t.messageType?(a.$message.success(\"编辑成功\"),a.$router.push(\"work-memberReturnVisit/questionnaireTemplate\")):a.$message({message:t.messageContent,type:\"warning\"}),a.loading=!1}).catch(function(e){a.loading=!1,a.$message({message:e,type:\"warning\"})})}}}},SFQf:function(e,t,a){\"use strict\";t.h=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1001.action\",method:\"post\",data:t})},t.o=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1003.action\",method:\"post\",data:t})},t.p=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1004.action\",method:\"post\",data:t})},t.l=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1031.action\",method:\"post\",data:t})},t.n=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1002.action\",method:\"post\",data:t})},t.k=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1005.action\",method:\"post\",data:t})},t.i=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1006.action\",method:\"post\",data:t})},t.j=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1007.action\",method:\"post\",data:t})},t.m=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1015.action\",method:\"post\",data:t})},t.g=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1008.action\",method:\"post\",data:t})},t.a=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1010.action\",method:\"post\",data:t})},t.f=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1011.action\",method:\"post\",data:t})},t.e=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1009.action\",method:\"post\",data:t})},t.d=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1012.action\",method:\"post\",data:t})},t.b=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1013.action\",method:\"post\",data:t})},t.c=function(e){var t=Base64.encode(n()(e));return a.i(s.a)({url:\"/I_SCRM_INTERFACE_1014.action\",method:\"post\",data:t})};var r=a(\"3cXf\"),n=a.n(r),s=a(\"Vo7i\")},b3UD:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(\"HxMY\"),n=a(\"gJPR\");var s=function(e){a(\"py5h\")},i=a(\"J0+h\")(r.a,n.a,s,null,null);t.default=i.exports},eqsi:function(e,t,a){(e.exports=a(\"acE3\")(!1)).push([e.i,\".right{float:right}.del-btn{margin-top:-10px}.add-btn-box,.line{text-align:center}.page-title{padding:20px;margin-bottom:20px;border-bottom:1px solid #e5e5e5}.add-member-return-task-wrap .from-wrap{width:50%;margin:0 auto}.add-member-return-task-wrap .item-inline .el-form-item{display:inline-block}.add-member-return-task-wrap .item-inline .middle-text{margin-left:20px!important}.return-item-wrap .item+.item{margin-top:10px}.return-item-wrap .item .item-header{padding:10px;border-bottom:1px solid #e5e5e5;margin-bottom:10px}.btn-box{text-align:center;margin-top:40px}\",\"\"])},gJPR:function(e,t,a){\"use strict\";var r={render:function(){var r=this,e=r.$createElement,n=r._self._c||e;return n(\"el-card\",{staticClass:\"centerInfo add-member-return-task-wrap\"},[n(\"h4\",{staticClass:\"page-title\"},[r._v(\"\\n    \"+r._s(r.currentId?\"编辑\":\"新增\")+\"问卷模版\\n  \")]),r._v(\" \"),n(\"el-form\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:r.loading,expression:\"loading\"}],ref:\"form\",staticClass:\"from-wrap\",attrs:{model:r.form,rules:r.rules,\"label-width\":\"120px\"}},[n(\"el-form-item\",{attrs:{label:\"问卷名称\",prop:\"templateName\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入问卷名称\"},model:{value:r.form.templateName,callback:function(e){r.$set(r.form,\"templateName\",e)},expression:\"form.templateName\"}})],1),r._v(\" \"),n(\"el-form-item\",{attrs:{label:\"问卷说明\",prop:\"templateDesc\"}},[n(\"el-input\",{attrs:{type:\"textarea\",rows:2,placeholder:\"请输入内容\"},model:{value:r.form.templateDesc,callback:function(e){r.$set(r.form,\"templateDesc\",e)},expression:\"form.templateDesc\"}})],1),r._v(\" \"),n(\"el-form-item\",{attrs:{label:\"是否需要打分\",prop:\"isEval\"}},[n(\"el-radio\",{attrs:{label:\"是\"},model:{value:r.form.isEval,callback:function(e){r.$set(r.form,\"isEval\",e)},expression:\"form.isEval\"}},[r._v(\"是\")]),r._v(\" \"),n(\"el-radio\",{attrs:{label:\"否\"},model:{value:r.form.isEval,callback:function(e){r.$set(r.form,\"isEval\",e)},expression:\"form.isEval\"}},[r._v(\"否\")])],1),r._v(\" \"),n(\"el-form-item\",{attrs:{label:\"分值\"}},[n(\"el-col\",{attrs:{span:8}},[n(\"el-input-number\",{attrs:{size:\"small\"},model:{value:r.form.evalVal.lowVal,callback:function(e){r.$set(r.form.evalVal,\"lowVal\",e)},expression:\"form.evalVal.lowVal\"}})],1),r._v(\" \"),n(\"el-col\",{staticClass:\"line\",attrs:{span:2}},[r._v(\"至\")]),r._v(\" \"),n(\"el-col\",{attrs:{span:8}},[n(\"el-input-number\",{attrs:{size:\"small\"},model:{value:r.form.evalVal.highVal,callback:function(e){r.$set(r.form.evalVal,\"highVal\",e)},expression:\"form.evalVal.highVal\"}})],1)],1),r._v(\" \"),n(\"el-form-item\",{attrs:{label:\"评分标准\",prop:\"evalDesc\"}},[n(\"el-input\",{attrs:{type:\"textarea\",rows:2,placeholder:\"请输入内容\"},model:{value:r.form.evalDesc,callback:function(e){r.$set(r.form,\"evalDesc\",e)},expression:\"form.evalDesc\"}})],1),r._v(\" \"),n(\"div\",{staticClass:\"return-item-wrap\"},[r._l(r.form.patrolShopTaskTempDtl,function(t,a){return n(\"div\",{key:a,staticClass:\"item\"},[n(\"div\",{staticClass:\"item-header\"},[r._v(\"\\n          回访项\"+r._s(a+1)+\"\\n          \"),n(\"el-button\",{staticClass:\"right del-btn\",attrs:{type:\"primary\"},on:{click:function(e){r.deleteItem(t,a)}}},[r._v(\"删除\")])],1),r._v(\" \"),n(\"el-form-item\",{attrs:{label:\"回访项\",prop:\"taskName\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入回访项\"},model:{value:t.returnVisitItem,callback:function(e){r.$set(t,\"returnVisitItem\",e)},expression:\"item.returnVisitItem\"}})],1),r._v(\" \"),n(\"el-form-item\",{attrs:{label:\"回访话术\",prop:\"taskName\"}},[n(\"el-input\",{attrs:{type:\"textarea\",rows:2,placeholder:\"请输入回访话术\"},model:{value:t.returnVisitItemDesc,callback:function(e){r.$set(t,\"returnVisitItemDesc\",e)},expression:\"item.returnVisitItemDesc\"}})],1)],1)}),r._v(\" \"),n(\"div\",{staticClass:\"add-btn-box\"},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:r.addItem}},[r._v(\"新增回访项\")])],1)],2),r._v(\" \"),n(\"div\",{staticClass:\"btn-box\"},[n(\"el-button\",{on:{click:r.handleBack}},[r._v(\"返回\")]),r._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){r.submit(\"form\")}}},[r._v(\"确定\")])],1)],1)],1)},staticRenderFns:[]};t.a=r},py5h:function(e,t,a){var r=a(\"eqsi\");\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);a(\"XkoO\")(\"88510e8a\",r,!0)}});"}