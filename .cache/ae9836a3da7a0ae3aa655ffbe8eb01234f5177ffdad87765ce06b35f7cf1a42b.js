{"source":"webpackJsonp([288],{\"0xDb\":function(t,e,a){\"use strict\";e.a=function(t){var e={},a=function(a){var n=!1;0<JSON.parse(sessionStorage.getItem(\"roles\")).length&&JSON.parse(sessionStorage.getItem(\"roles\")).forEach(function(t,e){a===t&&(n=!0)}),e[a]=n};for(var n in t)a(n);return e},e.b=function(s,o,r){var i=void 0,a=void 0,c=void 0,u=void 0,l=void 0,d=function t(){var e=+new Date-u;e<o&&0<e?i=setTimeout(t,o-e):(i=null,r||(l=s.apply(c,a),i||(c=a=null)))};return function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];c=this,u=+new Date;var n=r&&!i;return i||(i=setTimeout(d,o)),n&&(l=s.apply(c,e),c=e=null),l}};var n=a(\"hRKE\");a.n(n),a(\"IcnI\")},\"1HuC\":function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=a(\"Qa/U\"),s=a(\"Z5Rt\"),o=a(\"J0+h\")(n.a,s.a,null,null,null);e.default=o.exports},\"Qa/U\":function(t,e,n){\"use strict\";var a=n(\"3cXf\"),s=n.n(a),o=n(\"4YfN\"),r=n.n(o),i=n(\"lQSI\"),c=(n(\"0xDb\"),n(\"SFQf\"));e.a={data:function(){return{search:{userId:\"\",page:0,limit:this.GLOBAL.limit},count:0,roleBtn:{addMemberReturnTask:!0,updateMemberReturnTask:!0,forbiddenMemberReturnTask:!0,deleteMemberReturnTask:!0},tableLoading:!1,tableData:[]}},computed:r()({},n.i(i.a)([\"userInfo\"])),created:function(){this.search.userId=this.userInfo.userCode},methods:{getTableData:function(){var a=this,t=this.$Lodash.cloneDeep(this.search);this.tableLoading=!0,n.i(c.h)(t).then(function(t){var e=JSON.parse(Base64.decode(t.data));a.count=e.count,a.tableData=e.data,a.tableLoading=!1}).catch(function(t){a.tableLoading=!1})},handleSizeChange:function(t){this.search.limit=t},handleCurrentChange:function(t){this.search.page=t},addTask:function(){this.$router.push({path:\"work-addUpdateMemberReturnTask\"})},viewTask:function(t){this.$router.push({path:\"/work/work-memberReturnTaskDetails/\"+t.id})},updateTask:function(t){s()(t);this.$router.push({path:\"/work/work-addUpdateMemberReturnTask/\"+t.id})},changeTaskStatus:function(t){var e=t.taskStatus;if(\"已结束\"!=e){var a={userId:this.userInfo.userCode,id:t.id,version:t.version};\"正在执行\"==e?this.stopTask(a):this.startTask(a)}},stopTask:function(t){var a=this;n.i(c.i)(t).then(function(t){var e=JSON.parse(Base64.decode(t.data));\"SUCCESS\"==e.messageType?(a.$message({message:\"停止成功\",type:\"success\"}),a.getTableData()):a.$message({message:e.messageContent,type:\"warning\"})}).catch(function(t){})},startTask:function(t){var a=this;n.i(c.j)(t).then(function(t){var e=JSON.parse(Base64.decode(t.data));\"SUCCESS\"==e.messageType?(a.$message({message:\"开启成功\",type:\"success\"}),a.getTableData()):a.$message({message:e.messageContent,type:\"warning\"})}).catch(function(t){})},deleteTask:function(t){var a=this,e={userId:this.userInfo.userCode,id:t.id,taskName:t.taskName};n.i(c.k)(e).then(function(t){var e=JSON.parse(Base64.decode(t.data));\"SUCCESS\"==e.messageType?(a.$message({message:\"删除成功\",type:\"success\"}),a.getTableData()):a.$message({message:e.messageContent,type:\"warning\"})}).catch(function(t){})}},watch:{search:{handler:function(t,e){this.getTableData()},deep:!0}}}},SFQf:function(t,e,a){\"use strict\";e.h=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1001.action\",method:\"post\",data:e})},e.o=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1003.action\",method:\"post\",data:e})},e.p=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1004.action\",method:\"post\",data:e})},e.l=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1031.action\",method:\"post\",data:e})},e.n=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1002.action\",method:\"post\",data:e})},e.k=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1005.action\",method:\"post\",data:e})},e.i=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1006.action\",method:\"post\",data:e})},e.j=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1007.action\",method:\"post\",data:e})},e.m=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1015.action\",method:\"post\",data:e})},e.g=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1008.action\",method:\"post\",data:e})},e.a=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1010.action\",method:\"post\",data:e})},e.f=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1011.action\",method:\"post\",data:e})},e.e=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1009.action\",method:\"post\",data:e})},e.d=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1012.action\",method:\"post\",data:e})},e.b=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1013.action\",method:\"post\",data:e})},e.c=function(t){var e=Base64.encode(s()(t));return a.i(o.a)({url:\"/I_SCRM_INTERFACE_1014.action\",method:\"post\",data:e})};var n=a(\"3cXf\"),s=a.n(n),o=a(\"Vo7i\")},Z5Rt:function(t,e,a){\"use strict\";var n={render:function(){var a=this,t=a.$createElement,n=a._self._c||t;return n(\"el-container\",{staticClass:\"app-container\"},[n(\"el-header\",[a.roleBtn.addMemberReturnTask?n(\"el-card\",[a.roleBtn.addMemberReturnTask?n(\"el-button\",{attrs:{type:\"primary\"},on:{click:a.addTask}},[a._v(\"新建任务\")]):a._e()],1):a._e()],1),a._v(\" \"),n(\"el-main\",[n(\"el-card\",[n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:this.tableLoading,expression:\"this.tableLoading\"}],ref:\"tableData\",attrs:{data:a.tableData}},[n(\"el-table-column\",{attrs:{prop:\"createdOn\",label:\"创建时间\"}}),a._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"taskName\",label:\"回访标题\"}}),a._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"createdBy\",label:\"操作者\"}}),a._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"taskDate\",label:\"回访时间\"},scopedSlots:a._u([{key:\"default\",fn:function(t){return[a._v(\"\\n              \"+a._s(t.row.taskDate.taskDateBegin)+\"-\"+a._s(t.row.taskDate.taskDateEnd)+\"\\n            \")]}}])}),a._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"visitedQty\",label:\"回访人数\"},scopedSlots:a._u([{key:\"default\",fn:function(t){return[a._v(\"\\n              \"+a._s(t.row.visitedQty)+\"/\"+a._s(t.row.ttlVisitedQty)+\"\\n            \")]}}])}),a._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"taskStatus\",label:\"任务状态\"}}),a._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"action\",label:\"操作\"},scopedSlots:a._u([{key:\"default\",fn:function(e){return[n(\"el-tooltip\",{staticClass:\"item\",attrs:{content:\"查看\",placement:\"top\"}},[n(\"i\",{staticClass:\"iconfont icon-view\",on:{click:function(t){a.viewTask(e.row)}}})]),a._v(\" \"),a.roleBtn.updateMemberReturnTask?n(\"el-tooltip\",{staticClass:\"item\",attrs:{content:\"修改\",placement:\"top\"}},[n(\"i\",{staticClass:\"iconfont icon-edit\",on:{click:function(t){a.updateTask(e.row)}}})]):a._e(),a._v(\" \"),a.roleBtn.forbiddenMemberReturnTask&&\"已结束\"!=e.row.taskStatus?n(\"el-tooltip\",{staticClass:\"item\",attrs:{content:\"正在执行\"==e.row.taskStatus?\"禁用\":\"启用\",placement:\"top\"}},[n(\"i\",{staticClass:\"iconfont icon-forbidden\",on:{click:function(t){a.changeTaskStatus(e.row)}}})]):a._e(),a._v(\" \"),a.roleBtn.deleteMemberReturnTask?n(\"el-tooltip\",{staticClass:\"item\",attrs:{content:\"删除\",placement:\"top\"}},[n(\"i\",{staticClass:\"iconfont icon-delete\",on:{click:function(t){a.deleteTask(e.row)}}})]):a._e()]}}])})],1),a._v(\" \"),0!=a.count?n(\"el-footer\",[n(\"el-pagination\",{staticClass:\"pagination\",attrs:{background:\"\",layout:\"prev, pager, next, jumper\",\"page-size\":a.search.limit,total:a.count},on:{\"current-change\":a.handleCurrentChange}})],1):a._e()],1)],1)],1)},staticRenderFns:[]};e.a=n}});"}